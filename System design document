# ğŸ§  Personal Journaling App â€” Implementation Plan

## ğŸ”§ Technology Stack

### âœ… Backend (API & AI Layer)
- **Framework**: NestJS  
  _Modular and scalable architecture for building efficient GraphQL APIs._
- **Language**: TypeScript  
  _Provides type safety and better DX._
- **ORM**: Prisma  
  _Elegant and auto-typed data access layer for PostgreSQL._
- **Database**: PostgreSQL  
  _Reliable, relational database suited for journaling history._
- **Authentication**: JWT-based auth  
  _Implemented via `@nestjs/passport` and `bcrypt` for secure login._
- **AI Integration**: Hugging Face Inference API  
  _Using free models like Mistral 7B and Falcon for text generation, with fallback._

### âœ… Frontend (User Interface Layer)
- **Framework**: Next.js (App Router)  
  _Full-stack React framework with server rendering support._
- **Language**: TypeScript  
  _Strongly typed frontend for robust code._
- **Styling**: Tailwind CSS + Styled Components  
  _For atomic styling and custom component theming._
- **GraphQL Client**: Apollo Client  
  _Querying and mutating the GraphQL API from UI._
- **Authentication**: NextAuth.js with JWT strategy  
  _Secure session handling with frontend/server integration._
- **State Management**: React Hooks  
  _Minimal local state with `useState`, `useEffect`, and custom hooks._

## ğŸ—ï¸ Architecture Overview
```
ğŸ“¦ backend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ journal/          # CRUD operations for journals
â”‚   â”œâ”€â”€ ai/               # AI text generation service
â”‚   â”œâ”€â”€ auth/             # Auth controller + JWT guards
â”‚   â””â”€â”€ users/            # User profile and preferences
â”œâ”€â”€ prisma/               # DB schema and migrations
â””â”€â”€ main.ts               # Bootstrap app

ğŸ“¦ frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/              # Pages (create, edit, dashboard)
â”‚   â”œâ”€â”€ components/       # Shared components (Sidebar, JournalList, etc.)
â”‚   â”œâ”€â”€ hooks/            # Custom Apollo & AI hook
â”‚   â””â”€â”€ styles/           # Global and theme styles
```

## ğŸ“‹ Feature Implementation Plan

### âœ… 1. User Authentication
- JWT issuance via NestJS
- `bcrypt`-based password hashing
- Login/Signup routes with GraphQL
- Session handling in frontend via `NextAuth.js`

### âœ… 2. Journal Entry Management
- Full CRUD via NestJS GraphQL resolvers
- Enum-based category selection
- Pagination-ready querying
- Editable in `/dashboard/create` and `/dashboard/edit/[id]`

### âœ… 3. Dashboard + Analytics
- Pie Chart: Category distribution
- Line Chart: Word count over time
- Summary Box: Total number of entries
- Data transformation done client-side from GraphQL response

### âœ… 4. AI-Powered Text Generation âœ¨
- Mutation: `analyzeJournal(input: AnalyzeJournalInput!)`
- Based on Hugging Face free models:
  - `mistralai/Mistral-7B-Instruct-v0.1`
  - `tiiuae/falcon-7b-instruct`
  - `openchat/openchat-3.5-0106`
- Injects suggestion directly into the journal `content` field 
- Graceful fallback handling if model fails

## ğŸ§¬ Database Schema
```prisma
model User {
  id        String   @id @default(uuid())
  email     String   @unique
  password  String
  entries   Entry[]
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Entry {
  id        String   @id @default(uuid())
  title     String
  content   String
  category  Category
  mood      String?
  sentiment String?
  userId    String
  user      User     @relation(fields: [userId], references: [id])
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

enum Category {
  PERSONAL
  WORK
  EDUCATION
  TRAVEL
  OTHER
}
```

## ğŸ“… Development Timeline

### **Phase 1 â€” Setup & Auth (Days 1â€“3)**
- Initialize NestJS and Next.js projects
- Configure GraphQL and Prisma
- Implement backend auth and session-based frontend auth

### **Phase 2 â€” Core Journal Features (Days 4â€“6)**
- CRUD operations (entry, edit, delete)
- Category selection via enum
- Persisting entries to database
- UI form validation

### **Phase 3 â€” Dashboard & Analytics (Days 7â€“8)**
- Dashboard layout with cards and charts
- Word count trends (Line chart)
- Category overview (Pie chart)

### **Phase 4 â€” AI Integration & Polish (Days 9â€“10)**
- Add AI text generation via Hugging Face
- Hook up frontend mutation via `useAnalyzeJournal`
- Inject suggestions into content field (non-modal)
- UI/UX polishing (responsive layout, loading states)

## ğŸ’¡ Future Ideas
- Mood detection & emoji tagging via AI
- Calendar heatmap for journaling frequency
- Export to PDF or Markdown
- Offline-first support via PWA

## âœ… Status Tracker
| Feature                     | Status        |
|----------------------------|---------------|
| User Auth (Nest + NextAuth)| âœ… Done       |
| Journal CRUD               | âœ… Done       |
| Analytics Dashboard        | âœ… Done       |
| AI Suggestion (HuggingFace)| âœ… Done       |
| Edit + Create Flows        | âœ… Done       |
| UI/UX Enhancements         | ğŸ›  In Progress |
| Sentiment Detection (AI)   | ğŸ”œ Optional   |