# ğŸ§  Personal Journaling App â€” Implementation Plan

## ğŸ”§ Technology Stack

### âœ… Backend (API & AI Layer)
- **Framework**: NestJS  
  _Modular and scalable architecture for building efficient GraphQL APIs._
- **Language**: TypeScript  
  _Provides type safety and better DX._
- **ORM**: Prisma  
  _Elegant and auto-typed data access layer for PostgreSQL._
- **Database**: PostgreSQL  
  _Reliable, relational database suited for journaling history._
- **Authentication**: JWT-based auth  
  _Implemented via `@nestjs/passport` and `bcrypt` for secure login._
- **AI Integration**: Hugging Face Inference API  
  _Using free models like Mistral 7B and Falcon for text generation, with fallback._
-  **GraphQL API**

### âœ… Frontend (User Interface Layer)
- **Framework**: Next.js (App Router)  
  _Full-stack React framework with server rendering support._
- **Language**: TypeScript  
  _Strongly typed frontend for robust code._
- **Styling**: Styled Components  
  _For atomic styling and custom component theming._
- **GraphQL Client**: Apollo Client  
  _Querying and mutating the GraphQL API from UI._
- **Authentication**: NextAuth.js with JWT strategy  
  _Secure session handling with frontend/server integration._
- **State Management**: React Hooks  
  _Minimal local state with `useState`, `useEffect`, and custom hooks._

## ğŸ—ï¸ Architecture Overview
```

+---------------------+       +---------------------+       +---------------------+
|                     |       |                     |       |                     |
|     PostgreSQL      |       |    Hugging Face     |       |      NextAuth.js    |
|     Database        |       |    AI Service       |       |   Authentication    |
|                     |       |                     |       |                     |
+---------------------+       +---------------------+       +---------------------+
           ^                           ^                           ^
           |                           |                           |
           |                           |                           |
           v                           v                           v
+---------------------+       +---------------------+       +---------------------+
|                     |       |                     |       |                     |
|       Prisma        |       |    REST API for     |       |   JWT Strategy &    |
|       ORM           |       |    AI Analysis      |       |   Role Guards       |
|                     |       |                     |       |                     |
+---------------------+       +---------------------+       +---------------------+
           ^                           ^                           ^
           |                           |                           |
           |                           |                           |
           v                           v                           v
+-----------------------------------------------------------------+
|                                                                 |
|                          NestJS Backend                         |
|                                                                 |
|  - GraphQL API for Journaling Operations                        |
|  - REST API for AI Analysis and Token Refresh                   |
|  - Authentication and Authorization                             |
|                                                                 |
+-----------------------------------------------------------------+
                                  ^
                                  |
                                  |
                                  v
+-----------------------------------------------------------------+
|                                                                 |
|                         Next.js Frontend                        |
|                                                                 |
|  - User Interface for Journal Management                        |
|  - Authentication Handling with NextAuth.js                     |
|  - GraphQL Client for Data Fetching                             |
|                                                                 |
+-----------------------------------------------------------------+


## ğŸ“¦ Monorepo Architecture

The project is structured as a monorepo:

```
monorepo/
â”œâ”€â”€ backend/       # NestJS GraphQL API
â””â”€â”€ frontend/      # Next.js 15 App Router Client



ğŸ“¦ backend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ journal/          # CRUD operations for journals
â”‚   â”œâ”€â”€ ai/               # AI text generation service
â”‚   â”œâ”€â”€ auth/             # Auth controller + JWT guards
â”‚   â””â”€â”€ users/            # User profile and preferences
â”œâ”€â”€ prisma/               # DB schema and migrations
â””â”€â”€ main.ts               # Bootstrap app

ğŸ“¦ frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/              # Pages (create, edit, dashboard)
â”‚   â”œâ”€â”€ components/       # Shared components (Sidebar, JournalList, etc.)
â”‚   â”œâ”€â”€ hooks/            # Custom Apollo & AI hook
â”‚   â””â”€â”€ styles/           # Global and theme styles
```


## ğŸš€ Features

### âœ… 1. Authentication
- JWT-based login/signup via NestJS
- Passwords hashed with `bcrypt`
- Session handled using NextAuth.js (JWT strategy)
- Role-based routing for `/admin` vs `/dashboard`

### âœ… 2. Journal Management
- Full CRUD operations via GraphQL
- Tag input via `react-tag-input`
- Category enum: `PERSONAL`, `WORK`, `TRAVEL`, `EDUCATION`, `OTHER`
- Tags stored using Prismaâ€™s `connectOrCreate` logic

### âœ… 3. Dashboard + Analytics
- **Pie Chart**: Entry distribution by category
- **Line Chart**: Word count over time
- **Summary Card**: Total number of entries
- Category & Tag filters included

### âœ… 4. AI Journal Suggestions
- Mutation: `analyzeJournal(input)`
- Fallbacks using Mistral 7B, Falcon, and OpenChat
- Suggestions injected into journal content field
- Graceful loading + error state

### âœ… 5. Tags System
- Create/update entries with tags
- UI component: `TagInput` (internally manages `string[]`)
- Backend: `Tag` model with many-to-many `@relation("EntryTags")`

### âœ… 6. UI & UX Enhancements
- Smooth loading indicators on login/submit
- Pulse-style spinner during onboarding
- Modal animations + input validation with feedback
- Fully responsive dashboard layout

---

## ğŸ§¬ Database Schema

```prisma
model User {
  id        String   @id @default(uuid())
  email     String   @unique
  password  String
  entries   JournalEntry[]
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model JournalEntry {
  id        String   @id @default(uuid())
  title     String
  content   String
  category  Category
  tags      Tag[]    @relation("EntryTags")
  userId    String
  user      User     @relation(fields: [userId], references: [id])
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Tag {
  id      String         @id @default(uuid())
  name    String         @unique
  entries JournalEntry[] @relation("EntryTags")
}

enum Category {
  PERSONAL
  WORK
  EDUCATION
  TRAVEL
  OTHER
}
```

---

## ğŸ“… Development Timeline

| Phase        | Days | Tasks |
|--------------|------|-------|
| **Phase 1**  | 1â€“3  | Setup Nest + Next, Auth, Prisma, JWT |
| **Phase 2**  | 4â€“6  | Journal CRUD + Tagging |
| **Phase 3**  | 7â€“8  | Analytics Dashboard, Charts |
| **Phase 4**  | 9â€“10 | AI Suggestion, UI Polish |

---

## âœ… Status Tracker

| Feature                     | Status        |
|----------------------------|---------------|
| User Auth (Nest + NextAuth)| âœ… Done       |
| Journal CRUD               | âœ… Done       |
| Analytics Dashboard        | âœ… Done       |
| Tagging System             | âœ… Done       |
| AI Suggestion (HuggingFace)| âœ… Done       |
| Loading UX                 | âœ… Done       |
| Sentiment Detection (AI)   | ğŸ”œ Optional   |

---
